<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Логин</title>
    <link rel="icon" type="image/png" href="/favicon_tent.png">
    <!-- Подключение Bootstrap для единообразного оформления -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">

    <link rel="stylesheet" href="/css/custom.css">

    <style>
        #loginTitle {
            transition: all 0.6s ease;
        }
        #loginTitle.welcome {
            color: #28a745;
            transform: scale(1.1);
        }
    </style>

</head>

<body style="background-color: #faeedd;
      background-image: url('/pattern.png');
        background-repeat: repeat;
        background-size: 500px 500px;">
<div class="container mt-5"
     style="max-width: 500px;
         background-image: url('/tent.png');
         background-position: center top;
         padding-top: 180px;
         background-repeat: no-repeat;">

    <!-- Заголовок страницы -->
    <h2 id="loginTitle" class="mb-4 text-center">Вход на сайт</h2>


    <!-- Сообщение об ошибке при неверных данных -->
    <div th:if="${param.error}" class="alert alert-danger text-center">
        Неправильный логин или пароль
    </div>

    <!-- Сообщение после выхода из системы -->
    <div th:if="${param.logout}" class="alert alert-success text-center">
        Вы успешно вышли из аккаунта
    </div>

    <!-- Форма входа -->
    <form th:action="@{/login}" method="post" class="needs-validation" id="loginForm" novalidate>

        <!-- Поле ввода email -->
        <div class="mb-3">
            <label for="username" class="form-label" style="font-weight: bold; margin-top: 5px;">Почта:</label>
            <input type="email" id="username" name="username" class="form-control" required
                   placeholder="Введите почту">
            <div class="invalid-feedback">Пожалуйста введите действительный почтовый ящик.</div>
        </div>

        <!-- Поле ввода пароля -->
        <div class="mb-3">
            <label for="password" class="form-label" style="font-weight: bold">Пароль:</label>
            <input type="password" id="password" name="password" class="form-control" required placeholder="Введите пароль">
            <div class="invalid-feedback">Пароль обязателен.</div>
        </div>

        <!-- Кнопка отправки -->
        <div class="d-grid">
            <button type="submit" class="btn btn-primary">Войти</button>
        </div>
    </form>

    <!-- Ссылка на регистрацию -->
    <div class="mt-5 text-center">
        <p style="font-weight: bold;">Еще нет аккаунта?
            <a th:href="@{/register}" style="font-weight: bold">Зарегистрируйтесь здесь</a>
        </p>
    </div>

    <!-- Скрипт валидации Bootstrap -->
    <script>
        // Активация клиентской проверки формы
        (function () {
            'use strict';
            const forms = document.querySelectorAll('.needs-validation');
            Array.from(forms).forEach(function (form) {
                form.addEventListener('submit', function (event) {
                    if (!form.checkValidity()) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        })();
    </script>

</div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const form = document.getElementById('loginForm');
        const title = document.getElementById('loginTitle');

        form.addEventListener('submit', function (e) {
            // Меняем текст и запускаем анимацию
            title.textContent = 'Добро пожаловать!';
            title.classList.add('welcome');

            // Даём анимации 500 мс, затем реально отправляем форму
            e.preventDefault();
            setTimeout(function () {
                form.submit();
            }, 500);
        });
    });
</script>
</body>
</html>
